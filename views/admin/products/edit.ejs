<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Edit Product</title>

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100">

  <div class="max-w-3xl mx-auto px-4 py-10">

    <!-- Header -->
    <div class="mb-6">
      <h1 class="text-2xl font-bold text-gray-800">
        Edit Product
      </h1>
      <p class="text-sm text-gray-500 mt-1">
        Update product details
      </p>
    </div>

    <!-- Form -->
    <form
      action="/admin/products/edit/<%= product._id %>"
      method="POST"
      enctype="multipart/form-data"
      class="bg-white p-6 rounded-lg shadow space-y-6"
    >

      <!-- Product Name -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">
          Product Name
        </label>
        <input
          type="text"
          name="name"
          required
          value="<%= product.name %>"
          class="w-full border px-3 py-2 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"
        />
      </div>

      <!-- Category -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">
          Category
        </label>
        <select
          name="category"
          required
          class="w-full border px-3 py-2 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"
        >
          <% categories.forEach(cat => { %>
            <option
              value="<%= cat._id %>"
              <%= String(cat._id) === String(product.category) ? 'selected' : '' %>
            >
              <%= cat.name %>
            </option>
          <% }) %>
        </select>
      </div>

      <!-- Description -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">
          Description
        </label>
        <textarea
          name="description"
          required
          rows="5"
          class="w-full border px-3 py-2 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"
        ><%= product.description %></textarea>
      </div>

      <!-- Current Image -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">
          Current Image
        </label>
        <img
          src="<%= product.image.secure_url %>"
          alt="<%= product.name %>"
          class="w-32 h-32 object-cover rounded border"
        />
      </div>

      <!-- New Image Upload -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">
          Replace Image (optional)
        </label>
        <input
          type="file"
          name="image"
          accept="image/*"
          class="w-full border px-3 py-2 rounded bg-white"
        />
      </div>

      <!-- Actions -->
      <div class="flex items-center gap-4 pt-4">
        <button
          type="submit"
          class="bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700 transition"
        >
          Update Product
        </button>

        <a
          href="/admin/products"
          class="text-gray-600 hover:underline"
        >
          Cancel
        </a>
      </div>

    </form>

  </div>

</body>
</html>
